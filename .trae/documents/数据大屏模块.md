## 目标与范围

* 新增一个“数据大屏”页面（类似 BI 展示大屏），展示所选指标在各区县的最新数据，按值从高到低排序。

* 支持自由选择指标（可按考核类型筛选/搜索），并提供 TOP10 排名视图与全量排名列表。

## 现状复用点

* 前端已具备 ECharts 与封装组件 [IndicatorChart.vue](file:///d:/Users/JUN/Desktop/data_proj_v1_trae（docker）v1/frontend/src/components/IndicatorChart.vue)（趋势图可复用）。

* 后端已有区县最新值接口 `GET /api/v1/metrics/by_name_or_id`（前端封装为 `getIndicatorLatestById`），可直接拿到“单指标、全区县、最新一期”的数据用于排序与大屏展示。

* 路由与菜单结构在 [router/index.ts](file:///d:/Users/JUN/Desktop/data_proj_v1_trae（docker）v1/frontend/src/router/index.ts) 与 [MainLayout.vue](file:///d:/Users/JUN/Desktop/data_proj_v1_trae（docker）v1/frontend/src/layout/MainLayout.vue) 中，适合将大屏挂在“指标数据”分组下。

## 页面设计（MVP）

* 新增页面：`frontend/src/views/BigScreen.vue`

  * 顶部：标题 + 当前时间（可选）+ 指标选择器（考核类型下拉 + 指标搜索/下拉）。

  * 主区块：

    * 左侧：TOP10 横向条形图（高→低），显示区县名称与数值。

    * 右侧：全区县排名表（同样高→低，支持分页/滚动）。

  * 可选增强：自动刷新（如 60s）、切换“value/score”等指标字段、展示统计日期 `stat_date`。

## 数据流与排序规则

* 选择指标后调用：`getIndicatorLatestById({ indicator_id })`（对应后端 `/metrics/by_name_or_id`）

* 处理：过滤掉 `value` 为空的记录（或置 0/置底），按 `value`（或用户选的字段）降序排序。

* 输出：

  * TOP10 数据：排序后取前 10。

  * 全量表：排序后全量展示。

## 代码改动点（前端）

* 路由：在 `router/index.ts` 增加 `/big-screen`（或 `/bigscreen`）路由，挂在 MainLayout children 下，并加 `meta.requiresAuth`。

* 菜单：在 `MainLayout.vue` 的“指标数据”分组中新增“数据大屏”入口。

* 组件抽取（建议）：新增通用 `useEcharts()` 组合式或 `DistrictRankingChart.vue` 组件，封装 `echarts.init/setOption/dispose/resize`，避免与现有页面重复逻辑。

* 样式：大屏全屏布局（100vw/100vh）、深色主题、栅格分区。

## 可能需要的后端补充（仅在需要时）

* 若需要“按圈层/按专业/按考核类型直接出排名”的后端聚合接口，再新增一个专用 endpoint；但 MVP 可完全依赖现有接口，无需改后端。

## 验证方式

* 前端本地启动后：

  * 进入 `/big-screen`，选择任意指标，确认：

    * 图表与表格同步更新

    * 排序正确（高→低）

    * 空值处理符合预期

* 复用现有鉴权：未登录跳转 `/login`。

## 交付清单

* 新增“数据大屏”页面 + 路由 + 菜单入口

* 指标选择（类型筛选 + 搜索/下拉）

* 区县排名 TOP10 图 + 全量排名表（降序）

* 基础自适应与销毁清理（避免内存泄漏）

如果你确认这个 MVP 方向，我将开始落地代码；同时你也可以补充：

* 排序字段用 `value` 

* 需要展示“最新日期 stat\_date”吗？

* 不用“自动轮播/自动切换指标”？

